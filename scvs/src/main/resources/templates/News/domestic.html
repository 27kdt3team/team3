<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<!-- head part -->
<head th:replace="~{layouts/head :: head}">
    <title>Domestic</title>
    <!-- 구글 폰트 '나눔 고딕' 링크 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
</head>

<body>
<!-- css part -->
<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/domestic.css}">
</th:block>

<!-- header part -->
<div th:replace="~{layouts/header :: header}"></div>

<!-- Main Body Contents -->
<th:block layout:fragment = "MainBodyContents">
    <main class="container">

        <!-- 국내 경제 뉴스 리스트 -->
        <section class="domestic">
            <div class="news-column">

                <h2>국내 경제 뉴스</h2>
                <br>

                <!-- 동적으로 DB에서 가져온 데이터 출력 -->
                <div th:each="newsItem : ${domesticList}" class="news-item">
                    <div class="text-content">
                        <div class="media-date">
                            <p class="media" th:text="${newsItem.source}"></p>
                            <p class="date" th:text="${newsItem.publishedAt}"></p>
                        </div>
                        <h4>
                            <!-- 뉴스 아이디와 현재 머물고 있는 페이지 값을 상세 조회 메서드로 넘겨주기 -->
                            <a th:href="@{|/domestic/${newsItem.korEconNewsId}|(page=${domesticList.number + 1})}" th:text="${newsItem.title}" class="news-title"></a>
                        </h4>
                    </div>
                    <img th:src="${newsItem.imageLink}" alt="Unable to load image" width="180" height="90" class="news images">
                </div>

                <!-- 페이징 처리 -->
                <div class="pagination">
                    <!-- 첫번째 페이지 -->
                    <a th:href="@{/domestic(page=1)}">맨앞</a>
                    <!-- 이전 페이지 -->
                    <a th:href="${domesticList.first} ? '#' : @{/domestic(page=${domesticList.number})}">이전</a>

                    <!-- 페이지 번호 -->
                    <span th:each="page: ${#numbers.sequence(startPage, endPage)}">
                        <!-- 현재 페이지는 링크 없이 숫자만으로 표시 -->
                        <span th:if="${page == domesticList.number + 1}" th:text="${page}"></span>
                        <!-- 현재 페이지 외의 페이지들은 숫자에 링크로 표시 -->
                        <span th:unless="${page == domesticList.number + 1}">
                            <a th:href="@{/domestic(page=${page})}" th:text="${page}"></a>
                        </span>
                    </span>

                    <!-- 다음 페이지 -->
                    <a th:href="${domesticList.last} ? '#' : @{/domestic(page=${domesticList.number + 2})}">다음</a>
                    <!-- 마지막 페이지 -->
                    <a th:href="@{/domestic(page=${domesticList.totalPages})}">맨뒤</a>
                </div>

            </div>
        </section>

        <!-- 환율 정보 -->
        <aside class="exchange-rate-container">
            <div class="rate">
                <div class="currency-symbol">$ / ₩</div>
                <div class="currency-value">1411</div>
                <div class="currency-change">▼ 2.70 (-0.19%)</div>
            </div>
        </aside>

        <!-- 트렌드 순위 -->
        <aside class="trending-container">
            <div class="trending">
                <h3>국내 트렌드 순위</h3>
                <ol>
                    <li>1. 삼성전자 <span class="volume">50</span></li>
                    <li>2. LG에너지솔루션 <span class="volume">55</span></li>
                    <li>3. 현대차 <span class="volume">40</span></li>
                    <li>4. SK하이닉스 <span class="volume">10</span></li>
                    <li>5. 네이버 <span class="volume">20</span></li>
                    <li>6. 기아 <span class="volume">20</span></li>
                    <li>7. 셀트리온 <span class="volume">20</span></li>
                    <li>8. KB금융 <span class="volume">20</span></li>
                    <li>9. 하나금융지주 <span class="volume">20</span></li>
                    <li>10. 한국전력 <span class="volume">20</span></li>
                </ol>
            </div>
        </aside>

    </main>
</th:block>

<!-- footer part -->
<div th:replace="~{layouts/footer :: footer}"></div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</html>
